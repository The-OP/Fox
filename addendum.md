# Приложение к шапке официального лисотреда /s/
Это дополнение к шапке для тех, кто хочет настроить свой браузер еще больше. Настройки для повышения производительности и отключения различных зондов, полезные дополнения, интересные ссылки и т.п.

**Важное замечание**: Это памятка с интересными настройками и аддонами. Здесь пока (?) нет готового рецепта для максимальной анонимности. Если вы пришли за этим, проследуйте [сюда](https://tails.boum.org/) или [сюда](https://www.torproject.org/).

Стандартный дисклеймер раз: я включил краткие пояснения к каждой настройке и аддону, но если вы четко не понимаете за что они отвечают и что у вас может отвалиться в результате их установки, лучше не трогайте.

Стандартный дисклеймер два: следует помнить, что меры для достижения анонимности и безопасности зачастую противоположны друг другу, ибо чем больше вы меняете дефолтное поведение браузера и отключаете включенных по умолчанию механизмов, тем уникальнее становится его отпечаток. Если в приоритете именно анонимность, а не безопасность с анонимностью по остаточному принципу, многие зонды лучше не выключать, а скармливать им ложную информацию, маскирующую вас под типичного юзера. Думайте сами, что вам нужнее.

## Интересные ссылки
[Evercookie](http://samy.pl/evercookie/). Cобирательное название для техник засовывания трекинг-идентификаторов в разные труднодоступные места помимо cookies, LSO и DOM Storage.

### Фингерпринтинг
Такие методы обнаружения, для которых не требуется запись уникального идентификатора на машину пользователя.

Проверить себя на уникальность отпечатка можно на следующих ресурсах:
* https://panopticlick.eff.org/
* http://ip-check.info/
* https://amiunique.org/
* http://whoer.net/
* http://browserspy.dk/ - не фингерпринтер, но показывает, как много информации можно извлечь из браузера. Обновляется редко.

Статьи по теме:
* [Как Tor Project борется с фингерпринтингом](http://geektimes.ru/post/244484/) ([английская более свежая версия](https://www.sharelatex.com/github/repos/KOLANICH/Article-2015-Dull-captaincy-or-the-way-Tor-Project-fights-browser-fingerprinting/builds/44e474be624ca3bb65d1b1fbeb95abd1de8c5d13/raw/output.pdf))
* [Флаги HSTS и их использование для фингерпринтинга](http://geektimes.ru/post/244065/)

## Настройки
[Здесь](http://kb.mozillazine.org/About:config_entries) и [здесь](http://kb.mozillazine.org/Category:Preferences) подробные описания настроек, жаль, не всех.

[Неплохой обзор от Mozilla](https://support.mozilla.org/en-US/kb/how-stop-firefox-automatically-making-connections) с описаниями механизмов, из-за которых Firefox может инициировать соединения без прямого приказа пользователя. Настройки для отключения подобной самодеятельности есть здесь, ниже.

Если лень самому делать diff между дефолтными конфигами предыдущей и новой версии Firefox, чтобы узнать, какие настройки добавили и изменили, можно читать [блог](https://cat-in-136.github.io/tags.html#tag_pref%20diff) автора аддона Configuration Mania, который сделал это за вас.

Приведенные здесь настройки условно разделены на три категории:

1. [Настройки](prefs_1.js) относительно безопасные - меняя их, ничего нужного не отвалится, и кое-что улучшится.
2. [Настройки](prefs_2.js), ломающие не особо нужную функциональность.
3. [Настройки](prefs_3.js) ломающие нужную, даже базовую фунциональность. Их отключают либо для повышения безопасности, либо для повышения анонимности.

**Не следует** копировать себе все целиком из третьей категории. Внимательно посмотрите и решите, что именно вам нужно. Из второй - можно, но все же рекомендуется прочитать перед этим.

Применить эти настройки можно, дописав их в конец находящегося в профиле `prefs.js`, либо создав там же файл `user.js` и записав их в него. Но не забудьте, что вы это сделали, потому что записанные в `user.js` настройки будут откатываться на указанные там значения при каждом перезапуске браузера, даже если вы меняли их другими способами (about:config, Preferences, etc). Подробнее [здесь](http://kb.mozillazine.org/User.js_file).

## Аддоны
* [HTTPS Everywhere](https://addons.mozilla.org/en-us/firefox/addon/https-everywhere/). Содержит список сайтов, поддерживающих как HTTP, так HTTPS, и автоматически меняет все HTTP-ссылки, ведующие к этим сайтам, на HTTPS. Аддон вернули на AMO, но на всякий случай - [ссылка](https://www.eff.org/https-everywhere/) на официальный сайт. Правила обновляются редко, актуальную версию правил можно получить [на GitHub](https://github.com/EFForg/https-everywhere), там же можно отправить новое правило.

* [RefControl](https://addons.mozilla.org/firefox/addon/refcontrol/). Резалка рефереров. Можно тонко тюнить, а можно рубить только рефереры при переходе на другой домен (Block (3rd party)), оставляя внутридоменные, что просто, эффективно для 99% случаев и не ломает так много сайтов как полный запрет.

* [CleanLinks](https://addons.mozilla.org/firefox/addon/clean-links/). Чистит ссылки от редирект-префиксов Гугла и т.п. Имеет белый список как доменов, так и рэгэкспов, чтобы пропускать ссылки со всякими нужными префиксами вроде auth, ServiceLogin и т.п.

* [Google search link fix](https://addons.mozilla.org/en-US/firefox/addon/google-search-link-fix/). Более простая альтернатива CleanLinks для тех, кого он по каким-то причинам не устраивает. Работает только на Google, Yandex и Yahoo.

* [Cookie Controller](https://addons.mozilla.org/firefox/addon/cookie-controller/). Менее удобная чем Cookie Monster штука, но можно использовать на случай длительного затишья в поддержке первого (такое уже бывало).

* [Self-Destructing Cookies](https://addons.mozilla.org/firefox/addon/self-destructing-cookies/). Самоуничтожение кук после закрытия всех вкладок с соответствующим сайтом. Может быть удобнее чем полная блокировка.

* [BetterPrivacy](https://addons.mozilla.org/firefox/addon/betterprivacy/). Менее актуально с понижением числа пользователей Flash, но все же. Уничтожает [LSO](https://en.wikipedia.org/wiki/Local_shared_object), которые не может уничтожить сам браузер при очистке кук.

* [RequestPolicy](https://addons.mozilla.org/firefox/addon/requestpolicy/). Резалка кросс-доменных запросов. Более надежная, но уже не обновляющаяся. Можно (и рекомендуется самим автором) использовать в связке с NoScript.

	* [RequestPolicy Continued](https://requestpolicycontinued.github.io). Форк проекта, в котором идет дальнейшее развитие.

* [Policeman](https://addons.mozilla.org/firefox/addon/policeman/). Еще одна резалка кросс-доменных запросов. Более удобная, более фичастая и активно развивающаяся. Но пока есть некоторые шероховатости, например с file -> file и file -> web. Из фич, которые есть в RequestPolicy, тут нет Request Log (решается сторонними аддонами вроде HttpFox) и блокировки редиректов с домена на домен, если они не в белом списке (решается NoRedirect в некотором роде, но менее удобно). UPD: Блокировку редиректов запилили в 0.19 версии, ждем на AMO.

* [uMatrix](https://addons.mozilla.org/firefox/addon/umatrix/). Самая многофункциональная из трех вышеперечисленных резалок кросс-доменных запросов. Как и Policeman может блокировать запросы к зависимости от типа контента, но обладает более удобным интерфейсом. Также умеет блокировать скрипты и куки. Документацию еще не перенесли целиком из старого проекта, на котором оснван uMatrix, так что если что непонятно, смотреть не только [здесь](https://github.com/gorhill/uMatrix/wiki), но и [здесь](https://github.com/gorhill/httpswitchboard/wiki).

* [NoRedirect](https://addons.mozilla.org/firefox/addon/noredirect/). Рубит редиректы по рэгэкспам source или destination.

* [User Agent Switcher](https://addons.mozilla.org/firefox/addon/user-agent-switcher/) и [списки к нему](http://techpatterns.com/downloads/firefox/useragentswitcher.xml)

* [Random Agent Spoofer](https://addons.mozilla.org/firefox/addon/random-agent-spoofer/). Меняет юзер-агенты по таймеру и с дополнительными фичами, препятствующими фингерпринтингу. Версия с GitHub имеет расширенную функциональность по сравнению с версией с AMO (см. описание на AMO).

* [Privacy Badger](https://addons.mozilla.org/firefox/addon/privacy-badger-firefox/). Аналог Ghostery от EFF. Актуально для тех, кто хочет поставить и забыть, чтоб оно там автоматом боролось с трекингом.
	
	* Часто спрашивают, чем плох Ghostery. Во-первых, он принадлежит маркетинговой компании, собирающей [статистику](https://addons.mozilla.org/en-US/firefox/addon/ghostery/privacy/) с wannabe-анонимусов. Во-вторых - распространяется под [проприетарной лицензией](https://addons.mozilla.org/en-US/firefox/addon/ghostery/license/5.4.1). Но самое главное то, что он бесполезен, если уже используется баннерорезка с анти-трекерными подписками и какой-нибудь аддон для контроля/очистки кук. См. [исследование Стэнфорда](http://cyberlaw.stanford.edu/node/6730), сравнивающее баннерорезки с Ghostery по эффективности. Если уж вам очень сильно хочется автоматического все-в-одном комбайна, подобного Ghostery - используйте Privacy Badger от Electronic Frontier Foundation, распространяющийся под свободной лицензией.

* [Yet Another Remove It Permanently](https://addons.mozilla.org/firefox/addon/yarip/). Баннерорезка с поддержкой XPath. Для тех случаев, когда CSS-селекторов не хватает.
